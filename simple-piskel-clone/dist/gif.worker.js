!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=147)}({147:function(t,e,i){!function t(e,i,r){function s(o,a){if(!i[o]){if(!e[o]){if(n)return n(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=i[o]={exports:{}};e[o][0].call(l.exports,(function(t){return s(e[o][1][t]||t)}),l,l.exports,t,e,i,r)}return i[o].exports}for(var n=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,e,i){var r=t("./TypedNeuQuant.js"),s=t("./LZWEncoder.js");function n(){this.page=-1,this.pages=[],this.newPage()}n.pageSize=4096,n.charMap={};for(var o=0;o<256;o++)n.charMap[o]=String.fromCharCode(o);function a(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new n}n.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(n.pageSize),this.cursor=0},n.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<n.pageSize;i++)t+=n.charMap[this.pages[e][i]];return t},n.prototype.writeByte=function(t){this.cursor>=n.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},n.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},n.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},a.prototype.setDelay=function(t){this.delay=Math.round(t/10)},a.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},a.prototype.setDispose=function(t){0<=t&&(this.dispose=t)},a.prototype.setRepeat=function(t){this.repeat=t},a.prototype.setTransparent=function(t){this.transparent=t},a.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),0<=this.repeat&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},a.prototype.finish=function(){this.out.writeByte(59)},a.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},a.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},a.prototype.setGlobalPalette=function(t){this.globalPalette=t},a.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},a.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},a.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new r(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},a.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var i=0,r=0;r<e;r++){var s=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}},a.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw"Unknown dithering kernel: "+t;var r=i[t],s=0,n=this.height,o=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<n;l++){e&&(h*=-1);for(var u=1==h?0:o-1,p=1==h?o:0;u!==p;u+=h){var f=3*(s=l*o+u),c=a[f],y=a[f+1],d=a[f+2];f=this.findClosestRGB(c,y,d),this.usedEntry[f]=!0,this.indexedPixels[s]=f,f*=3;for(var w=c-this.colorTab[f],g=y-this.colorTab[f+1],b=d-this.colorTab[f+2],x=1==h?0:r.length-1,v=1==h?r.length:0;x!==v;x+=h){var P=r[x][1],m=r[x][2];if(0<=P+u&&P+u<o&&0<=m+l&&m+l<n){var B=r[x][0];f=s+P+m*o,a[f*=3]=Math.max(0,Math.min(255,a[f]+w*B)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+g*B)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+b*B))}}}}},a.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},a.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var s=0,n=16777216,o=this.colorTab.length,a=0,h=0;a<o;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<n&&(n=f,s=h)}return s},a.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0,n=0;n<e;n++)for(var o=0;o<t;o++)this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],r++},a.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),e=null===this.transparent?t=0:(t=1,2),0<=this.dispose&&(e=7&this.dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},a.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},a.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},a.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},a.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},a.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},a.prototype.writePixels=function(){new s(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},a.prototype.stream=function(){return this.out},e.exports=a},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(t,e,i){var r=5003,s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=function(t,e,i,n){var o,a,h,l,u,p,f=Math.max(2,n),c=new Uint8Array(256),y=new Int32Array(r),d=new Int32Array(r),w=0,g=0,b=!1;function x(t,e){c[a++]=t,254<=a&&P(e)}function v(t){for(var e=0;e<t;++e)y[e]=-1}function P(t){0<a&&(t.writeByte(a),t.writeBytes(c,0,a),a=0)}function m(t){return(1<<t)-1}function B(){return 0===remaining?-1:(--remaining,255&i[curPixel++])}function S(t,e){for(o&=s[w],0<w?o|=t<<w:o=t,w+=n_bits;8<=w;)x(255&o,e),o>>=8,w-=8;if((h<g||b)&&(b?(h=m(n_bits=l),b=!1):(++n_bits,h=12==n_bits?4096:m(n_bits))),t==p){for(;0<w;)x(255&o,e),o>>=8,w-=8;P(e)}}this.encode=function(i){i.writeByte(f),remaining=t*e,curPixel=0,function(t,e){var i,s,n,o,f,c,w;for(b=!1,n_bits=l=t,h=m(n_bits),p=1+(u=1<<t-1),g=u+2,a=0,o=B(),c=0,i=r;i<65536;i*=2)++c;c=8-c,v(5003),S(u,e);t:for(;-1!=(s=B());)if(i=(s<<12)+o,y[n=s<<c^o]!==i){if(0<=y[n]){f=5003-n,0===n&&(f=1);do{if((n-=f)<0&&(n+=5003),y[n]===i){o=d[n];continue t}}while(0<=y[n])}S(o,e),o=s,g<4096?(d[n]=g++,y[n]=i):(w=e,v(r),g=u+2,b=!0,S(u,w))}else o=d[n];S(o,e),S(p,e)}(f+1,i),i.writeByte(0)}}},{}],3:[function(t,e,i){var r=256,s=1<<18;e.exports=function(t,e){var i,n,o,a,h;function l(t,e,n,o,a){for(var l,u,p=Math.abs(e-t),f=Math.min(e+t,r),c=e+1,y=e-1,d=1;c<f||p<y;)u=h[d++],c<f&&((l=i[c++])[0]-=u*(l[0]-n)/s,l[1]-=u*(l[1]-o)/s,l[2]-=u*(l[2]-a)/s),p<y&&((l=i[y--])[0]-=u*(l[0]-n)/s,l[1]-=u*(l[1]-o)/s,l[2]-=u*(l[2]-a)/s)}function u(t,e,s){var n,h,l,u,p,f=~(1<<31),c=f,y=-1,d=y;for(n=0;n<r;n++)h=i[n],(l=Math.abs(h[0]-t)+Math.abs(h[1]-e)+Math.abs(h[2]-s))<f&&(f=l,y=n),(u=l-(o[n]>>12))<c&&(c=u,d=n),p=a[n]>>10,a[n]-=p,o[n]+=p<<10;return a[y]+=64,o[y]-=65536,d}this.buildColormap=function(){!function(){var t,e;for(i=[],n=new Int32Array(256),o=new Int32Array(r),a=new Int32Array(r),h=new Int32Array(32),t=0;t<r;t++)e=(t<<12)/r,i[t]=new Float64Array([e,e,e,0]),a[t]=256,o[t]=0}(),function(){var r,s,n,o,a,p,f=t.length,c=30+(e-1)/3,y=f/(3*e),d=~~(y/100),w=1024,g=2048,b=g>>6;for(b<=1&&(b=0),r=0;r<b;r++)h[r]=w*(256*(b*b-r*r)/(b*b));s=f<1509?(e=1,3):f%499!=0?1497:f%491!=0?1473:f%487!=0?1461:1509;var x,v,P,m,B,S=0;for(r=0;r<y;)if(p=u(n=(255&t[S])<<4,o=(255&t[S+1])<<4,a=(255&t[S+2])<<4),x=w,P=n,m=o,B=a,i[v=p][0]-=x*(i[v][0]-P)/1024,i[v][1]-=x*(i[v][1]-m)/1024,i[v][2]-=x*(i[v][2]-B)/1024,0!==b&&l(b,p,n,o,a),f<=(S+=s)&&(S-=f),0===d&&(d=1),++r%d==0)for(w-=w/c,(b=(g-=g/30)>>6)<=1&&(b=0),p=0;p<b;p++)h[p]=w*(256*(b*b-p*p)/(b*b))}(),function(){for(var t=0;t<r;t++)i[t][0]>>=4,i[t][1]>>=4,i[t][2]>>=4,i[t][3]=t}(),function(){var t,e,s,o,a,h,l=0,u=0;for(t=0;t<r;t++){for(h=(s=i[a=t])[1],e=t+1;e<r;e++)(o=i[e])[1]<h&&(a=e,h=o[1]);if(o=i[a],t!=a&&(e=o[0],o[0]=s[0],s[0]=e,e=o[1],o[1]=s[1],s[1]=e,e=o[2],o[2]=s[2],s[2]=e,e=o[3],o[3]=s[3],s[3]=e),h!=l){for(n[l]=u+t>>1,e=l+1;e<h;e++)n[e]=t;l=h,u=t}}for(n[l]=u+255>>1,e=l+1;e<256;e++)n[e]=255}()},this.getColormap=function(){for(var t=[],e=[],s=0;s<r;s++)e[i[s][3]]=s;for(var n=0,o=0;o<r;o++){var a=e[o];t[n++]=i[a][0],t[n++]=i[a][1],t[n++]=i[a][2]}return t},this.lookupRGB=function(t,e,s){for(var o,a,h,l=1e3,u=-1,p=n[e],f=p-1;p<r||0<=f;)p<r&&(l<=(h=(a=i[p])[1]-e)?p=r:(p++,h<0&&(h=-h),(o=a[0]-t)<0&&(o=-o),(h+=o)<l&&((o=a[2]-s)<0&&(o=-o),(h+=o)<l&&(l=h,u=a[3])))),0<=f&&(l<=(h=e-(a=i[f])[1])?f=-1:(f--,h<0&&(h=-h),(o=a[0]-t)<0&&(o=-o),(h+=o)<l&&((o=a[2]-s)<0&&(o=-o),(h+=o)<l&&(l=h,u=a[3]))));return u}}},{}],4:[function(t,e,i){var r,s;r=t("./GIFEncoder.js"),s=function(t){var e,i,s,n;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setDispose(t.dispose),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),s=e.stream(),t.data=s.pages,t.cursor=s.cursor,t.pageSize=s.constructor.pageSize,t.canTransfer?(n=function(){var e,r,s,n;for(n=[],e=0,r=(s=t.data).length;e<r;e++)i=s[e],n.push(i.buffer);return n}(),self.postMessage(t,n)):self.postMessage(t)},self.onmessage=function(t){return s(t.data)}},{"./GIFEncoder.js":1}]},{},[4])}});